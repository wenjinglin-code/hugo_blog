<div class="search-box">
  <input type="text" id="search-input" placeholder="搜索知识库...">
  <button id="search-button">搜索</button>
</div>
<div id="search-results"></div>

<style>
.search-box {
  margin-bottom: 1rem;
}

#search-input {
  width: 70%;
  padding: 0.5rem;
  border: 1px solid #ddd;
  border-radius: 4px;
}

#search-button {
  padding: 0.5rem 1rem;
  background-color: #3498db;
  color: white;
  border: none;
  border-radius: 4px;
  cursor: pointer;
}

#search-button:hover {
  background-color: #2980b9;
}

#search-results {
  margin-top: 1rem;
}

.search-result {
  margin-bottom: 1rem;
  padding: 1rem;
  border: 1px solid #eee;
  border-radius: 4px;
}

.search-result h3 {
  margin-top: 0;
}
</style>

<script>
document.addEventListener('DOMContentLoaded', function() {
  const searchInput = document.getElementById('search-input');
  const searchButton = document.getElementById('search-button');
  const searchResults = document.getElementById('search-results');
  
  // 简单的搜索功能
  function performSearch() {
    const query = searchInput.value.toLowerCase();
    if (!query) {
      searchResults.innerHTML = '';
      return;
    }
    
    // 获取所有文章内容
    fetch('/index.xml')
      .then(response => response.text())
      .then(str => new window.DOMParser().parseFromString(str, "text/xml"))
      .then(data => {
        const items = data.querySelectorAll("item");
        let results = [];
        
        items.forEach(item => {
          const title = item.querySelector("title").textContent;
          const description = item.querySelector("description").textContent;
          const link = item.querySelector("link").textContent;
          
          if (title.toLowerCase().includes(query) || description.toLowerCase().includes(query)) {
            results.push({title, description, link});
          }
        });
        
        displayResults(results);
      });
  }
  
  function displayResults(results) {
    if (results.length === 0) {
      searchResults.innerHTML = '<p>未找到相关结果。</p>';
      return;
    }
    
    let html = '';
    results.forEach(result => {
      html += `
        <div class="search-result">
          <h3><a href="${result.link}">${result.title}</a></h3>
          <p>${result.description.substring(0, 200)}...</p>
        </div>
      `;
    });
    
    searchResults.innerHTML = html;
  }
  
  searchButton.addEventListener('click', performSearch);
  searchInput.addEventListener('keyup', function(event) {
    if (event.key === 'Enter') {
      performSearch();
    }
  });
});
</script>
